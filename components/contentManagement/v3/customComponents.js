/**
 * Custom GrapeJS Component Types
 *
 * Feature-rich components with editable properties (traits):
 * - Audio Player: Play audio from uploaded assets
 * - Video Player: YouTube, Vimeo, or uploaded video assets
 * - Marketplace: Lucene-powered product search
 * - Countdown: Configurable countdown timer with target date
 */

/**
 * Register all custom component types with the GrapeJS editor
 * @param {Object} editor - GrapeJS editor instance
 * @param {Object} options - Configuration options (oemCompanyId, platformId, etc.)
 */
export function registerCustomComponents(editor, options = {}) {
  const { oemCompanyId, platformId = 1 } = options;

  // ============================================
  // ICON DATA - Available icons for the picker
  // ============================================
  const iconLibraries = {
    mui: {
      name: 'Material Icons',
      icons: {
        home: 'M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z',
        search: 'M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',
        star: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',
        favorite: 'M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z',
        settings: 'M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z',
        person: 'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z',
        email: 'M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z',
        phone: 'M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z',
        location: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z',
        shopping_cart: 'M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z',
        menu: 'M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z',
        close: 'M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z',
        check: 'M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z',
        add: 'M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z',
        remove: 'M19 13H5v-2h14v2z',
        edit: 'M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z',
        delete: 'M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z',
        visibility: 'M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z',
        arrow_forward: 'M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z',
        arrow_back: 'M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z',
        arrow_up: 'M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z',
        arrow_down: 'M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z',
        download: 'M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z',
        upload: 'M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z',
        share: 'M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z',
        notifications: 'M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z',
        info: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z',
        warning: 'M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z',
        error: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z',
        help: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z',
        lock: 'M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z',
        verified: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z',
        thumb_up: 'M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z',
        thumb_down: 'M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z',
        code: 'M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z',
        link: 'M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z',
        calendar: 'M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z',
        bolt: 'M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21z',
        eco: 'M6.05 8.05c-2.73 2.73-2.73 7.15-.02 9.88 1.47-3.4 4.09-6.24 7.36-7.93-2.77 2.34-4.71 5.61-5.39 9.32 2.6 1.23 5.8.78 7.95-1.37C19.43 14.47 20 4 20 4S9.53 4.57 6.05 8.05z',
        dashboard: 'M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z',
        analytics: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z',
        account_circle: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z',
        logout: 'M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z',
        login: 'M11 7L9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z',
        refresh: 'M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z',
        print: 'M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z',
        camera: 'M12 15c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm8-9h-3.17L15 4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z',
        image: 'M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z',
        attach_file: 'M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H9v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S6 2.79 6 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z',
        cloud: 'M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z',
        cloud_upload: 'M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z',
        cloud_download: 'M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z',
        folder: 'M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z',
        description: 'M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z',
        build: 'M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z',
        language: 'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z',
        play_arrow: 'M8 5v14l11-7z',
        pause: 'M6 19h4V5H6v14zm8-14v14h4V5h-4z',
        skip_next: 'M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z',
        skip_previous: 'M6 6h2v12H6zm3.5 6l8.5 6V6z',
        volume_up: 'M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z',
        volume_off: 'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z',
        fullscreen: 'M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z',
        more_vert: 'M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z',
        more_horiz: 'M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z',
        filter_list: 'M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z',
        sort: 'M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z',
        bookmark: 'M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z',
        bookmark_border: 'M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z',
        label: 'M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z',
        schedule: 'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z',
        today: 'M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z',
        event: 'M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z',
        flight: 'M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z',
        hotel: 'M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z',
        restaurant: 'M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z',
        local_cafe: 'M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM2 21h18v-2H2v2z',
        fitness_center: 'M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z',
        spa: 'M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61zm10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64z M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63zm-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29zm6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26zM12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45z',
        pets: 'M4.5 9.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0M9 5.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0M15 5.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0M19.5 9.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z',
        cake: 'M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2zm4.6 9.99l-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01zM18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9z',
        celebration: 'M2 22l14-5-9-9zm12.53-9.47l5.59-5.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.07-1.07-2.82-1.07-3.89 0l-5.59 5.59 1.06 1.06zm-4.47-5.65l-.59.59 1.06 1.06.59-.59c1.07-1.07 1.07-2.82 0-3.89l-.59-.59-1.06 1.06.59.59c.48.48.48 1.28 0 1.77zm7.07 7.07l-.59.59 1.06 1.06.59-.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.08-1.07-2.82-1.07-3.89 0zm-7.07 1.06l1.06 1.06.59-.59c.49-.49.49-1.28 0-1.77l-.59-.59-1.06 1.06.59.59c.49.48.49 1.28 0 1.77l-.59.47z',
        workspace: 'M16 13h3v3h2v-3h3v-2h-3V8h-2v3h-3v2zM2 21h12v-2H2v2zM20 8v11h2V8c0-2.76-2.24-5-5-5H5c-2.76 0-5 2.24-5 5v11h2V8c0-1.65 1.35-3 3-3h12c1.65 0 3 1.35 3 3z',
        group: 'M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z',
        chat: 'M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z',
        forum: 'M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z',
        support: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z',
        money: 'M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z',
        credit_card: 'M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z',
        key: 'M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z',
        security: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z',
        shield: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z',
        verified_user: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z',
        gavel: 'M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z',
        school: 'M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z',
        work: 'M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z',
        science: 'M19.8 18.4L14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z',
        lightbulb: 'M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z',
        extension: 'M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z',
        palette: 'M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z',
        brush: 'M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z',
        format_paint: 'M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4H9v11c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h8V4h-3z',
        format_quote: 'M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z',
        facebook: 'M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z',
        twitter: 'M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z',
        instagram: 'M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z',
        linkedin: 'M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z',
        youtube: 'M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z',
        github: 'M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z',
      }
    },
    feather: {
      name: 'Feather Icons',
      icons: {
        home: '<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',
        search: '<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',
        star: '<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',
        heart: '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',
        settings: '<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',
        user: '<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',
        mail: '<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',
        phone: '<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',
        'map-pin': '<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',
        'shopping-cart': '<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',
        menu: '<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',
        x: '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',
        check: '<polyline points="20 6 9 17 4 12"></polyline>',
        plus: '<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',
        minus: '<line x1="5" y1="12" x2="19" y2="12"></line>',
        edit: '<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',
        trash: '<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',
        eye: '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',
        'arrow-right': '<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',
        'arrow-left': '<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',
        'arrow-up': '<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',
        'arrow-down': '<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',
        download: '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',
        upload: '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',
        share: '<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',
        bell: '<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',
        calendar: '<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',
        clock: '<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',
        zap: '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',
        gift: '<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',
        camera: '<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',
        image: '<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',
        film: '<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',
        music: '<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',
        play: '<polygon points="5 3 19 12 5 21 5 3"></polygon>',
        pause: '<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',
        'skip-forward': '<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',
        'skip-back': '<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',
        volume: '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',
        'volume-x': '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',
        maximize: '<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',
        'more-vertical': '<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',
        'more-horizontal': '<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',
        filter: '<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',
        bookmark: '<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',
        tag: '<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',
        folder: '<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',
        file: '<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',
        'file-text': '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',
        code: '<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',
        terminal: '<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',
        link: '<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',
        cloud: '<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',
        'cloud-upload': '<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>',
        'cloud-download': '<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',
        database: '<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',
        server: '<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',
        globe: '<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',
        wifi: '<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',
        bluetooth: '<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',
        battery: '<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',
        'battery-charging': '<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',
        lock: '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',
        unlock: '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',
        key: '<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',
        shield: '<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',
        'alert-circle': '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',
        'alert-triangle': '<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',
        info: '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',
        'help-circle': '<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',
        'check-circle': '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',
        'x-circle': '<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',
        'thumbs-up': '<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',
        'thumbs-down': '<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',
        users: '<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',
        'message-circle': '<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',
        'message-square': '<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',
        send: '<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',
        inbox: '<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',
        'log-in': '<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',
        'log-out': '<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',
        refresh: '<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',
        'rotate-cw': '<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',
        'rotate-ccw': '<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',
        external: '<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',
        copy: '<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',
        clipboard: '<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',
        save: '<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',
        printer: '<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',
        trash2: '<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',
        sun: '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',
        moon: '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',
        compass: '<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',
        navigation: '<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',
        target: '<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',
        crosshair: '<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',
        activity: '<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',
        'trending-up': '<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',
        'trending-down': '<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',
        'bar-chart': '<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',
        'pie-chart': '<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',
        award: '<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',
        gift: '<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',
        coffee: '<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',
      }
    }
  };

  // ============================================
  // CUSTOM TRAIT: Icon Picker with Search
  // ============================================
  editor.TraitManager.addType('icon-picker', {
    createInput({ trait }) {
      const el = document.createElement('div');
      el.className = 'icon-picker-trait';

      const currentLibrary = trait.target?.getTrait('iconLibrary')?.get('value') || 'mui';
      const currentIcon = trait.get('value') || 'home';

      el.innerHTML = `
        <div style="position: relative;">
          <input type="text"
                 class="icon-search-input"
                 placeholder="Search icons..."
                 value="${currentIcon}"
                 style="width: 100%; padding: 8px 12px; background: #373d49; border: 1px solid #4a5568; border-radius: 4px; color: #e2e8f0; font-size: 13px;">
          <div class="icon-dropdown" style="display: none; position: absolute; top: 100%; left: 0; right: 0; max-height: 250px; overflow-y: auto; background: #2d3748; border: 1px solid #4a5568; border-radius: 4px; margin-top: 4px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
            <div class="icon-grid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; padding: 8px;"></div>
          </div>
        </div>
      `;

      const input = el.querySelector('.icon-search-input');
      const dropdown = el.querySelector('.icon-dropdown');
      const grid = el.querySelector('.icon-grid');

      const renderIcons = (filter = '') => {
        const lib = iconLibraries[currentLibrary];
        if (!lib) return;

        grid.innerHTML = '';
        const filterLower = filter.toLowerCase();

        Object.entries(lib.icons).forEach(([name, path]) => {
          if (filter && !name.toLowerCase().includes(filterLower)) return;

          const iconEl = document.createElement('div');
          iconEl.className = 'icon-option';
          iconEl.dataset.icon = name;
          iconEl.style.cssText = 'padding: 8px; cursor: pointer; border-radius: 4px; display: flex; flex-direction: column; align-items: center; gap: 4px; transition: background 0.2s;';
          iconEl.title = name;

          // Render SVG preview
          if (currentLibrary === 'mui') {
            iconEl.innerHTML = `
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#e2e8f0">
                <path d="${path}"/>
              </svg>
              <span style="font-size: 9px; color: #a0aec0; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; max-width: 100%;">${name}</span>
            `;
          } else {
            iconEl.innerHTML = `
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e2e8f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                ${path}
              </svg>
              <span style="font-size: 9px; color: #a0aec0; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; max-width: 100%;">${name}</span>
            `;
          }

          iconEl.addEventListener('mouseenter', () => {
            iconEl.style.background = '#4a5568';
          });
          iconEl.addEventListener('mouseleave', () => {
            iconEl.style.background = 'transparent';
          });
          iconEl.addEventListener('click', () => {
            input.value = name;
            dropdown.style.display = 'none';
            trait.set('value', name);
            // Trigger component re-render
            const component = trait.target;
            if (component) {
              component.addAttributes({ 'data-icon-name': name });
              component.trigger('change:attributes');
              // Force view to re-render
              const view = component.view;
              if (view && view.onRender) {
                view.onRender();
              }
            }
          });

          grid.appendChild(iconEl);
        });

        if (grid.children.length === 0) {
          grid.innerHTML = '<div style="grid-column: 1/-1; padding: 16px; text-align: center; color: #a0aec0;">No icons found</div>';
        }
      };

      input.addEventListener('focus', () => {
        dropdown.style.display = 'block';
        renderIcons(input.value);
      });

      input.addEventListener('input', (e) => {
        renderIcons(e.target.value);
        trait.set('value', e.target.value);
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!el.contains(e.target)) {
          dropdown.style.display = 'none';
        }
      });

      this.inputEl = input;
      return el;
    },

    onEvent({ elInput, component, event }) {
      const input = elInput.querySelector('.icon-search-input');
      if (input) {
        component.addAttributes({ 'data-icon-name': input.value });
        // Force view to re-render when icon changes
        const view = component.view;
        if (view && view.onRender) {
          view.onRender();
        }
      }
    },

    onUpdate({ elInput, component }) {
      const input = elInput.querySelector('.icon-search-input');
      const value = component.getAttributes()['data-icon-name'] || 'home';
      if (input) {
        input.value = value;
      }
    }
  });

  // ============================================
  // AUDIO PLAYER COMPONENT
  // ============================================
  editor.Components.addType('audio-player', {
    model: {
      defaults: {
        tagName: 'div',
        draggable: true,
        droppable: false,
        attributes: { class: 'audio-player-component' },
        traits: [
          {
            type: 'select',
            name: 'audioSource',
            label: 'Audio Source',
            options: [
              { id: 'asset', name: 'From Assets' },
              { id: 'url', name: 'External URL' },
            ],
            default: 'asset',
          },
          {
            type: 'text',
            name: 'audioUrl',
            label: 'Audio URL',
            placeholder: 'https://example.com/audio.mp3',
          },
          {
            type: 'text',
            name: 'trackTitle',
            label: 'Track Title',
            default: 'Audio Track',
          },
          {
            type: 'text',
            name: 'artistName',
            label: 'Artist Name',
            default: 'Artist',
          },
          {
            type: 'checkbox',
            name: 'autoplay',
            label: 'Autoplay',
            default: false,
          },
          {
            type: 'checkbox',
            name: 'loop',
            label: 'Loop',
            default: false,
          },
          {
            type: 'checkbox',
            name: 'showWaveform',
            label: 'Show Waveform',
            default: true,
          },
        ],
        // Script that runs in the canvas/preview
        script: function() {
          const el = this;
          const audioUrl = el.getAttribute('data-audio-url') || '';
          const trackTitle = el.getAttribute('data-track-title') || 'Audio Track';
          const artistName = el.getAttribute('data-artist-name') || 'Artist';
          const autoplay = el.getAttribute('data-autoplay') === 'true';
          const loop = el.getAttribute('data-loop') === 'true';

          // Create audio player HTML
          el.innerHTML = `
            <div class="audio-player-wrapper" style="max-width: 500px; margin: 20px auto; padding: 24px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
              <audio id="audio-${Date.now()}" src="${audioUrl}" ${autoplay ? 'autoplay' : ''} ${loop ? 'loop' : ''} style="display: none;"></audio>
              <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
                <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 28px;">üéµ</div>
                <div style="flex: 1;">
                  <p style="color: white; font-weight: 600; font-size: 16px; margin: 0 0 4px;">${trackTitle}</p>
                  <p style="color: rgba(255,255,255,0.6); font-size: 14px; margin: 0;">${artistName}</p>
                </div>
              </div>
              <div style="margin-bottom: 16px;">
                <div class="progress-bar" style="height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; overflow: hidden; cursor: pointer;">
                  <div class="progress" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); border-radius: 3px; transition: width 0.1s;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                  <span class="current-time" style="color: rgba(255,255,255,0.6); font-size: 12px;">0:00</span>
                  <span class="duration" style="color: rgba(255,255,255,0.6); font-size: 12px;">0:00</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; justify-content: center; gap: 24px;">
                <button class="prev-btn" style="background: none; border: none; color: rgba(255,255,255,0.6); font-size: 20px; cursor: pointer;">‚èÆ</button>
                <button class="play-btn" style="width: 56px; height: 56px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 50%; color: white; font-size: 24px; cursor: pointer; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);">‚ñ∂</button>
                <button class="next-btn" style="background: none; border: none; color: rgba(255,255,255,0.6); font-size: 20px; cursor: pointer;">‚è≠</button>
              </div>
            </div>
          `;

          // Audio player logic
          const audio = el.querySelector('audio');
          const playBtn = el.querySelector('.play-btn');
          const progressBar = el.querySelector('.progress-bar');
          const progress = el.querySelector('.progress');
          const currentTimeEl = el.querySelector('.current-time');
          const durationEl = el.querySelector('.duration');

          if (audio && playBtn) {
            const formatTime = (seconds) => {
              const mins = Math.floor(seconds / 60);
              const secs = Math.floor(seconds % 60);
              return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            playBtn.addEventListener('click', () => {
              if (audio.paused) {
                audio.play();
                playBtn.textContent = '‚è∏';
              } else {
                audio.pause();
                playBtn.textContent = '‚ñ∂';
              }
            });

            audio.addEventListener('timeupdate', () => {
              const percent = (audio.currentTime / audio.duration) * 100;
              progress.style.width = percent + '%';
              currentTimeEl.textContent = formatTime(audio.currentTime);
            });

            audio.addEventListener('loadedmetadata', () => {
              durationEl.textContent = formatTime(audio.duration);
            });

            audio.addEventListener('ended', () => {
              playBtn.textContent = '‚ñ∂';
              progress.style.width = '0%';
            });

            progressBar.addEventListener('click', (e) => {
              const rect = progressBar.getBoundingClientRect();
              const percent = (e.clientX - rect.left) / rect.width;
              audio.currentTime = percent * audio.duration;
            });
          }
        },
      },
      init() {
        this.on('change:attributes', this.updateContent);
      },
      updateContent() {
        const attrs = this.getAttributes();
        this.set('attributes', {
          ...attrs,
          'data-audio-url': this.getTrait('audioUrl')?.get('value') || '',
          'data-track-title': this.getTrait('trackTitle')?.get('value') || 'Audio Track',
          'data-artist-name': this.getTrait('artistName')?.get('value') || 'Artist',
          'data-autoplay': this.getTrait('autoplay')?.get('value') ? 'true' : 'false',
          'data-loop': this.getTrait('loop')?.get('value') ? 'true' : 'false',
        });
      },
    },
    view: {
      onRender() {
        // Re-run script when component is rendered in canvas
        const model = this.model;
        const el = this.el;
        const script = model.get('script');
        if (script) {
          try {
            script.call(el);
          } catch (e) {
            console.error('Audio player script error:', e);
          }
        }
      },
    },
  });

  // ============================================
  // VIDEO PLAYER COMPONENT
  // ============================================
  editor.Components.addType('video-player', {
    model: {
      defaults: {
        tagName: 'div',
        draggable: true,
        droppable: false,
        attributes: { class: 'video-player-component' },
        traits: [
          {
            type: 'select',
            name: 'videoSource',
            label: 'Video Source',
            options: [
              { id: 'youtube', name: 'YouTube' },
              { id: 'vimeo', name: 'Vimeo' },
              { id: 'asset', name: 'Uploaded Asset' },
              { id: 'url', name: 'External URL' },
            ],
            default: 'youtube',
          },
          {
            type: 'text',
            name: 'videoUrl',
            label: 'Video URL / ID',
            placeholder: 'YouTube/Vimeo URL or video file URL',
          },
          {
            type: 'text',
            name: 'posterImage',
            label: 'Poster Image URL',
            placeholder: 'Thumbnail image URL',
          },
          {
            type: 'checkbox',
            name: 'autoplay',
            label: 'Autoplay',
            default: false,
          },
          {
            type: 'checkbox',
            name: 'muted',
            label: 'Muted',
            default: false,
          },
          {
            type: 'checkbox',
            name: 'loop',
            label: 'Loop',
            default: false,
          },
          {
            type: 'checkbox',
            name: 'controls',
            label: 'Show Controls',
            default: true,
          },
          {
            type: 'select',
            name: 'aspectRatio',
            label: 'Aspect Ratio',
            options: [
              { id: '16:9', name: '16:9 (Widescreen)' },
              { id: '4:3', name: '4:3 (Standard)' },
              { id: '1:1', name: '1:1 (Square)' },
              { id: '9:16', name: '9:16 (Vertical)' },
            ],
            default: '16:9',
          },
        ],
        script: function() {
          const el = this;
          const videoSource = el.getAttribute('data-video-source') || 'youtube';
          const videoUrl = el.getAttribute('data-video-url') || '';
          const posterImage = el.getAttribute('data-poster-image') || '';
          const autoplay = el.getAttribute('data-autoplay') === 'true';
          const muted = el.getAttribute('data-muted') === 'true';
          const loop = el.getAttribute('data-loop') === 'true';
          const controls = el.getAttribute('data-controls') !== 'false';
          const aspectRatio = el.getAttribute('data-aspect-ratio') || '16:9';

          // Calculate padding based on aspect ratio
          const ratioMap = {
            '16:9': '56.25%',
            '4:3': '75%',
            '1:1': '100%',
            '9:16': '177.78%',
          };
          const paddingBottom = ratioMap[aspectRatio] || '56.25%';

          // Extract video ID from URL
          const getYouTubeId = (url) => {
            const match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
            return match ? match[1] : url;
          };

          const getVimeoId = (url) => {
            const match = url.match(/(?:vimeo\.com\/)(\d+)/);
            return match ? match[1] : url;
          };

          let videoHtml = '';

          if (videoSource === 'youtube' && videoUrl) {
            const videoId = getYouTubeId(videoUrl);
            const params = [];
            if (autoplay) params.push('autoplay=1');
            if (muted) params.push('mute=1');
            if (loop) params.push('loop=1', `playlist=${videoId}`);
            if (!controls) params.push('controls=0');
            const queryString = params.length ? '?' + params.join('&') : '';

            videoHtml = `
              <iframe
                src="https://www.youtube.com/embed/${videoId}${queryString}"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
              </iframe>
            `;
          } else if (videoSource === 'vimeo' && videoUrl) {
            const videoId = getVimeoId(videoUrl);
            const params = [];
            if (autoplay) params.push('autoplay=1');
            if (muted) params.push('muted=1');
            if (loop) params.push('loop=1');
            const queryString = params.length ? '?' + params.join('&') : '';

            videoHtml = `
              <iframe
                src="https://player.vimeo.com/video/${videoId}${queryString}"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                allow="autoplay; fullscreen; picture-in-picture"
                allowfullscreen>
              </iframe>
            `;
          } else if ((videoSource === 'asset' || videoSource === 'url') && videoUrl) {
            const videoAttrs = [];
            if (controls) videoAttrs.push('controls');
            if (autoplay) videoAttrs.push('autoplay');
            if (muted) videoAttrs.push('muted');
            if (loop) videoAttrs.push('loop');
            if (posterImage) videoAttrs.push(`poster="${posterImage}"`);

            videoHtml = `
              <video
                src="${videoUrl}"
                ${videoAttrs.join(' ')}
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                Your browser does not support the video tag.
              </video>
            `;
          } else {
            videoHtml = `
              <div style="position: absolute; inset: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;">
                <div style="font-size: 48px; margin-bottom: 16px;">üé¨</div>
                <p style="margin: 0; font-size: 18px; font-weight: 500;">Video Player</p>
                <p style="margin: 8px 0 0; font-size: 14px; opacity: 0.8;">Configure video URL in settings</p>
              </div>
            `;
          }

          el.innerHTML = `
            <div class="video-player-wrapper" style="position: relative; width: 100%; max-width: 900px; margin: 20px auto; padding-bottom: ${paddingBottom}; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
              ${videoHtml}
            </div>
          `;
        },
      },
      init() {
        this.on('change:attributes', this.updateContent);
      },
      updateContent() {
        const attrs = this.getAttributes();
        this.set('attributes', {
          ...attrs,
          'data-video-source': this.getTrait('videoSource')?.get('value') || 'youtube',
          'data-video-url': this.getTrait('videoUrl')?.get('value') || '',
          'data-poster-image': this.getTrait('posterImage')?.get('value') || '',
          'data-autoplay': this.getTrait('autoplay')?.get('value') ? 'true' : 'false',
          'data-muted': this.getTrait('muted')?.get('value') ? 'true' : 'false',
          'data-loop': this.getTrait('loop')?.get('value') ? 'true' : 'false',
          'data-controls': this.getTrait('controls')?.get('value') ? 'true' : 'false',
          'data-aspect-ratio': this.getTrait('aspectRatio')?.get('value') || '16:9',
        });
      },
    },
    view: {
      onRender() {
        const model = this.model;
        const el = this.el;
        const script = model.get('script');
        if (script) {
          try {
            script.call(el);
          } catch (e) {
            console.error('Video player script error:', e);
          }
        }
      },
    },
  });

  // ============================================
  // COUNTDOWN TIMER COMPONENT
  // ============================================
  editor.Components.addType('countdown-timer', {
    model: {
      defaults: {
        tagName: 'div',
        draggable: true,
        droppable: false,
        attributes: { class: 'countdown-timer-component' },
        traits: [
          {
            type: 'text',
            name: 'targetDate',
            label: 'Target Date',
            placeholder: 'YYYY-MM-DD',
          },
          {
            type: 'text',
            name: 'targetTime',
            label: 'Target Time',
            placeholder: 'HH:MM (24-hour format)',
            default: '00:00',
          },
          {
            type: 'text',
            name: 'title',
            label: 'Title Text',
            default: 'Event starts in',
          },
          {
            type: 'text',
            name: 'expiredMessage',
            label: 'Expired Message',
            default: 'Event has started!',
          },
          {
            type: 'select',
            name: 'theme',
            label: 'Theme',
            options: [
              { id: 'dark', name: 'Dark' },
              { id: 'light', name: 'Light' },
              { id: 'gradient', name: 'Gradient' },
            ],
            default: 'dark',
          },
          {
            type: 'checkbox',
            name: 'showDays',
            label: 'Show Days',
            default: true,
          },
          {
            type: 'checkbox',
            name: 'showHours',
            label: 'Show Hours',
            default: true,
          },
          {
            type: 'checkbox',
            name: 'showMinutes',
            label: 'Show Minutes',
            default: true,
          },
          {
            type: 'checkbox',
            name: 'showSeconds',
            label: 'Show Seconds',
            default: true,
          },
        ],
        script: function() {
          const el = this;
          const targetDate = el.getAttribute('data-target-date') || '';
          const targetTime = el.getAttribute('data-target-time') || '00:00';
          const title = el.getAttribute('data-title') || 'Event starts in';
          const expiredMessage = el.getAttribute('data-expired-message') || 'Event has started!';
          const theme = el.getAttribute('data-theme') || 'dark';
          const showDays = el.getAttribute('data-show-days') !== 'false';
          const showHours = el.getAttribute('data-show-hours') !== 'false';
          const showMinutes = el.getAttribute('data-show-minutes') !== 'false';
          const showSeconds = el.getAttribute('data-show-seconds') !== 'false';

          // Theme styles
          const themes = {
            dark: {
              bg: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',
              cardBg: 'rgba(255,255,255,0.1)',
              textColor: 'white',
              labelColor: 'rgba(255,255,255,0.6)',
              titleColor: 'rgba(255,255,255,0.8)',
            },
            light: {
              bg: '#f8fafc',
              cardBg: 'white',
              textColor: '#1a1a1a',
              labelColor: '#64748b',
              titleColor: '#64748b',
            },
            gradient: {
              bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
              cardBg: 'rgba(255,255,255,0.2)',
              textColor: 'white',
              labelColor: 'rgba(255,255,255,0.8)',
              titleColor: 'rgba(255,255,255,0.9)',
            },
          };
          const t = themes[theme] || themes.dark;

          const countdownId = 'countdown-' + Date.now();

          el.innerHTML = `
            <div id="${countdownId}" class="countdown-wrapper" style="text-align: center; padding: 60px 20px; background: ${t.bg}; border-radius: 20px; max-width: 700px; margin: 20px auto;">
              <p class="countdown-title" style="color: ${t.titleColor}; font-size: 16px; text-transform: uppercase; letter-spacing: 2px; margin: 0 0 24px;">${title}</p>
              <div class="countdown-display" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                ${showDays ? `
                  <div class="countdown-item" style="background: ${t.cardBg}; padding: 24px; border-radius: 16px; min-width: 100px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                    <p class="countdown-value" data-unit="days" style="font-size: 48px; font-weight: 700; color: ${t.textColor}; margin: 0; line-height: 1;">00</p>
                    <p class="countdown-label" style="font-size: 14px; color: ${t.labelColor}; margin: 8px 0 0; text-transform: uppercase;">Days</p>
                  </div>
                ` : ''}
                ${showHours ? `
                  <div class="countdown-item" style="background: ${t.cardBg}; padding: 24px; border-radius: 16px; min-width: 100px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                    <p class="countdown-value" data-unit="hours" style="font-size: 48px; font-weight: 700; color: ${t.textColor}; margin: 0; line-height: 1;">00</p>
                    <p class="countdown-label" style="font-size: 14px; color: ${t.labelColor}; margin: 8px 0 0; text-transform: uppercase;">Hours</p>
                  </div>
                ` : ''}
                ${showMinutes ? `
                  <div class="countdown-item" style="background: ${t.cardBg}; padding: 24px; border-radius: 16px; min-width: 100px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                    <p class="countdown-value" data-unit="minutes" style="font-size: 48px; font-weight: 700; color: ${t.textColor}; margin: 0; line-height: 1;">00</p>
                    <p class="countdown-label" style="font-size: 14px; color: ${t.labelColor}; margin: 8px 0 0; text-transform: uppercase;">Minutes</p>
                  </div>
                ` : ''}
                ${showSeconds ? `
                  <div class="countdown-item" style="background: ${t.cardBg}; padding: 24px; border-radius: 16px; min-width: 100px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                    <p class="countdown-value" data-unit="seconds" style="font-size: 48px; font-weight: 700; color: ${t.textColor}; margin: 0; line-height: 1;">00</p>
                    <p class="countdown-label" style="font-size: 14px; color: ${t.labelColor}; margin: 8px 0 0; text-transform: uppercase;">Seconds</p>
                  </div>
                ` : ''}
              </div>
              <p class="countdown-expired" style="display: none; font-size: 24px; font-weight: 600; color: ${t.textColor}; margin: 20px 0 0;">${expiredMessage}</p>
            </div>
          `;

          // Countdown logic
          if (targetDate) {
            const targetDateTime = new Date(`${targetDate}T${targetTime}:00`);
            const wrapper = el.querySelector(`#${countdownId}`);
            const display = wrapper.querySelector('.countdown-display');
            const expiredEl = wrapper.querySelector('.countdown-expired');
            const daysEl = wrapper.querySelector('[data-unit="days"]');
            const hoursEl = wrapper.querySelector('[data-unit="hours"]');
            const minutesEl = wrapper.querySelector('[data-unit="minutes"]');
            const secondsEl = wrapper.querySelector('[data-unit="seconds"]');

            const updateCountdown = () => {
              const now = new Date();
              const diff = targetDateTime - now;

              if (diff <= 0) {
                display.style.display = 'none';
                expiredEl.style.display = 'block';
                return;
              }

              const days = Math.floor(diff / (1000 * 60 * 60 * 24));
              const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
              const seconds = Math.floor((diff % (1000 * 60)) / 1000);

              if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
              if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
              if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
              if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
            };

            updateCountdown();
            setInterval(updateCountdown, 1000);
          }
        },
      },
      init() {
        this.on('change:attributes', this.updateContent);
      },
      updateContent() {
        const attrs = this.getAttributes();
        this.set('attributes', {
          ...attrs,
          'data-target-date': this.getTrait('targetDate')?.get('value') || '',
          'data-target-time': this.getTrait('targetTime')?.get('value') || '00:00',
          'data-title': this.getTrait('title')?.get('value') || 'Event starts in',
          'data-expired-message': this.getTrait('expiredMessage')?.get('value') || 'Event has started!',
          'data-theme': this.getTrait('theme')?.get('value') || 'dark',
          'data-show-days': this.getTrait('showDays')?.get('value') ? 'true' : 'false',
          'data-show-hours': this.getTrait('showHours')?.get('value') ? 'true' : 'false',
          'data-show-minutes': this.getTrait('showMinutes')?.get('value') ? 'true' : 'false',
          'data-show-seconds': this.getTrait('showSeconds')?.get('value') ? 'true' : 'false',
        });
      },
    },
    view: {
      onRender() {
        const model = this.model;
        const el = this.el;
        const script = model.get('script');
        if (script) {
          try {
            script.call(el);
          } catch (e) {
            console.error('Countdown script error:', e);
          }
        }
      },
    },
  });

  // ============================================
  // MARKETPLACE COMPONENT (Lucene Search)
  // ============================================
  editor.Components.addType('marketplace-embed', {
    model: {
      defaults: {
        tagName: 'div',
        draggable: true,
        droppable: false,
        attributes: { class: 'marketplace-embed-component' },
        traits: [
          {
            type: 'number',
            name: 'platformId',
            label: 'Platform ID',
            default: 1,
          },
          {
            type: 'number',
            name: 'pageSize',
            label: 'Products Per Page',
            default: 12,
          },
          {
            type: 'text',
            name: 'searchPlaceholder',
            label: 'Search Placeholder',
            default: 'Search products...',
          },
          {
            type: 'checkbox',
            name: 'showFilters',
            label: 'Show Filters',
            default: true,
          },
          {
            type: 'checkbox',
            name: 'showSearch',
            label: 'Show Search',
            default: true,
          },
          {
            type: 'checkbox',
            name: 'showPriceFilter',
            label: 'Show Price Filter',
            default: true,
          },
          {
            type: 'select',
            name: 'gridColumns',
            label: 'Grid Columns',
            options: [
              { id: '2', name: '2 Columns' },
              { id: '3', name: '3 Columns' },
              { id: '4', name: '4 Columns' },
            ],
            default: '3',
          },
          {
            type: 'select',
            name: 'cardStyle',
            label: 'Card Style',
            options: [
              { id: 'modern', name: 'Modern' },
              { id: 'minimal', name: 'Minimal' },
              { id: 'detailed', name: 'Detailed' },
            ],
            default: 'modern',
          },
        ],
        script: function() {
          const el = this;
          const platformId = parseInt(el.getAttribute('data-platform-id')) || 1;
          const pageSize = parseInt(el.getAttribute('data-page-size')) || 12;
          const searchPlaceholder = el.getAttribute('data-search-placeholder') || 'Search products...';
          const showFilters = el.getAttribute('data-show-filters') !== 'false';
          const showSearch = el.getAttribute('data-show-search') !== 'false';
          const showPriceFilter = el.getAttribute('data-show-price-filter') !== 'false';
          const gridColumns = el.getAttribute('data-grid-columns') || '3';
          const cardStyle = el.getAttribute('data-card-style') || 'modern';

          const marketplaceId = 'marketplace-' + Date.now();

          // Build grid template based on columns
          const gridTemplate = `repeat(auto-fill, minmax(${gridColumns === '2' ? '300px' : gridColumns === '4' ? '220px' : '260px'}, 1fr))`;

          el.innerHTML = `
            <div id="${marketplaceId}" class="marketplace-wrapper" style="max-width: 1200px; margin: 0 auto; padding: 40px 20px;">
              ${showSearch ? `
                <div class="marketplace-search" style="margin-bottom: 32px;">
                  <div style="display: flex; gap: 16px; max-width: 600px; margin: 0 auto;">
                    <input type="text" class="search-input" placeholder="${searchPlaceholder}" style="flex: 1; padding: 14px 20px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 16px; outline: none; transition: border-color 0.2s;">
                    <button class="search-btn" style="padding: 14px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer;">Search</button>
                  </div>
                </div>
              ` : ''}

              <div style="display: flex; gap: 32px;">
                ${showFilters ? `
                  <aside class="marketplace-filters" style="width: 260px; flex-shrink: 0;">
                    <h3 style="font-size: 18px; font-weight: 600; color: #1a1a1a; margin: 0 0 20px;">Filters</h3>

                    ${showPriceFilter ? `
                      <div class="filter-section" style="margin-bottom: 24px;">
                        <h4 style="font-size: 14px; font-weight: 600; color: #374151; margin: 0 0 12px;">Price Range</h4>
                        <div style="display: flex; gap: 12px; align-items: center;">
                          <input type="number" class="min-price" placeholder="Min" style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;">
                          <span style="color: #64748b;">-</span>
                          <input type="number" class="max-price" placeholder="Max" style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;">
                        </div>
                      </div>
                    ` : ''}

                    <div class="filter-categories" style="margin-bottom: 24px;">
                      <h4 style="font-size: 14px; font-weight: 600; color: #374151; margin: 0 0 12px;">Categories</h4>
                      <div class="category-list" style="display: flex; flex-direction: column; gap: 8px;">
                        <p style="color: #94a3b8; font-size: 14px; margin: 0;">Loading filters...</p>
                      </div>
                    </div>
                  </aside>
                ` : ''}

                <main class="marketplace-products" style="flex: 1;">
                  <div class="products-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <p class="results-count" style="color: #64748b; margin: 0;">Loading products...</p>
                    <select class="sort-select" style="padding: 10px 16px; border: 1px solid #e2e8f0; border-radius: 8px; background: white;">
                      <option value="relevance">Relevance</option>
                      <option value="price_low">Price: Low to High</option>
                      <option value="price_high">Price: High to Low</option>
                      <option value="newest">Newest</option>
                    </select>
                  </div>

                  <div class="products-grid" style="display: grid; grid-template-columns: ${gridTemplate}; gap: 24px;">
                    <!-- Products will be loaded here -->
                    ${[1,2,3,4,5,6].map(() => `
                      <div class="product-card-skeleton" style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.06);">
                        <div style="aspect-ratio: 1; background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);"></div>
                        <div style="padding: 20px;">
                          <div style="height: 12px; background: #e2e8f0; border-radius: 6px; margin-bottom: 12px; width: 60%;"></div>
                          <div style="height: 20px; background: #e2e8f0; border-radius: 6px; margin-bottom: 12px;"></div>
                          <div style="height: 24px; background: #e2e8f0; border-radius: 6px; width: 40%;"></div>
                        </div>
                      </div>
                    `).join('')}
                  </div>

                  <div class="pagination" style="display: flex; justify-content: center; gap: 8px; margin-top: 40px;">
                    <button class="page-btn prev-page" style="padding: 10px 16px; border: 1px solid #e2e8f0; border-radius: 8px; background: white; cursor: pointer;">‚Üê Previous</button>
                    <span class="page-info" style="padding: 10px 16px; color: #64748b;">Page 1</span>
                    <button class="page-btn next-page" style="padding: 10px 16px; border: 1px solid #e2e8f0; border-radius: 8px; background: white; cursor: pointer;">Next ‚Üí</button>
                  </div>
                </main>
              </div>
            </div>
          `;

          // Marketplace API integration
          const wrapper = el.querySelector(`#${marketplaceId}`);
          const searchInput = wrapper.querySelector('.search-input');
          const searchBtn = wrapper.querySelector('.search-btn');
          const productsGrid = wrapper.querySelector('.products-grid');
          const resultsCount = wrapper.querySelector('.results-count');
          const categoryList = wrapper.querySelector('.category-list');
          const prevBtn = wrapper.querySelector('.prev-page');
          const nextBtn = wrapper.querySelector('.next-page');
          const pageInfo = wrapper.querySelector('.page-info');

          let currentPage = 1;
          let totalProducts = 0;
          let filters = [];

          const renderProduct = (product, style) => {
            // Product is an array of {name, value} objects
            const getValue = (name) => {
              const field = product.find(f => f.name.toLowerCase() === name.toLowerCase());
              return field ? field.value : '';
            };

            const name = getValue('name') || getValue('title') || 'Product';
            const price = getValue('price');
            const image = getValue('image') || getValue('imageurl') || getValue('thumbnail');
            const category = getValue('category');
            const description = getValue('description');

            if (style === 'minimal') {
              return `
                <div class="product-card" style="background: white; border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;">
                  <div style="aspect-ratio: 1; background: ${image ? `url('${image}') center/cover` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'}; display: flex; align-items: center; justify-content: center; color: white;">
                    ${!image ? 'üì¶' : ''}
                  </div>
                  <div style="padding: 16px; text-align: center;">
                    <h3 style="font-size: 15px; font-weight: 500; color: #1a1a1a; margin: 0 0 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${name}</h3>
                    ${price ? `<p style="font-size: 18px; font-weight: 700; color: #667eea; margin: 0;">$${parseFloat(price).toFixed(2)}</p>` : ''}
                  </div>
                </div>
              `;
            }

            if (style === 'detailed') {
              return `
                <div class="product-card" style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.06); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;">
                  <div style="aspect-ratio: 4/3; background: ${image ? `url('${image}') center/cover` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'}; display: flex; align-items: center; justify-content: center; color: white; position: relative;">
                    ${!image ? 'üì¶' : ''}
                    ${category ? `<span style="position: absolute; top: 12px; left: 12px; padding: 6px 12px; background: rgba(255,255,255,0.9); color: #667eea; border-radius: 20px; font-size: 12px; font-weight: 500;">${category}</span>` : ''}
                  </div>
                  <div style="padding: 20px;">
                    <h3 style="font-size: 17px; font-weight: 600; color: #1a1a1a; margin: 0 0 8px; line-height: 1.3;">${name}</h3>
                    ${description ? `<p style="font-size: 14px; color: #64748b; margin: 0 0 16px; line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">${description}</p>` : ''}
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                      ${price ? `<p style="font-size: 22px; font-weight: 700; color: #1a1a1a; margin: 0;">$${parseFloat(price).toFixed(2)}</p>` : ''}
                      <button style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-weight: 500; cursor: pointer;">View</button>
                    </div>
                  </div>
                </div>
              `;
            }

            // Modern (default)
            return `
              <div class="product-card" style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.06); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;">
                <div style="aspect-ratio: 1; background: ${image ? `url('${image}') center/cover` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'}; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">
                  ${!image ? 'üì¶' : ''}
                </div>
                <div style="padding: 20px;">
                  ${category ? `<p style="color: #64748b; font-size: 12px; text-transform: uppercase; margin: 0 0 8px;">${category}</p>` : ''}
                  <h3 style="font-size: 16px; font-weight: 600; color: #1a1a1a; margin: 0 0 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${name}</h3>
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                    ${price ? `<p style="font-size: 20px; font-weight: 700; color: #667eea; margin: 0;">$${parseFloat(price).toFixed(2)}</p>` : ''}
                    <button style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 8px; color: white; font-weight: 500; cursor: pointer;">Add to Cart</button>
                  </div>
                </div>
              </div>
            `;
          };

          const searchProducts = async () => {
            const textSearch = searchInput ? searchInput.value : '';
            const minPrice = wrapper.querySelector('.min-price')?.value;
            const maxPrice = wrapper.querySelector('.max-price')?.value;

            try {
              // Note: In actual implementation, this would call the API
              // For now, show placeholder content
              productsGrid.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                  <div style="font-size: 64px; margin-bottom: 16px;">üîç</div>
                  <h3 style="font-size: 24px; font-weight: 600; color: #1a1a1a; margin: 0 0 12px;">Marketplace Connected</h3>
                  <p style="color: #64748b; margin: 0;">Configure the marketplace component with your platform ID and OEM Company ID to display products.</p>
                  <p style="color: #94a3b8; font-size: 14px; margin-top: 16px;">Platform ID: ${platformId} | Page Size: ${pageSize}</p>
                </div>
              `;
              resultsCount.textContent = 'Configure component to load products';
            } catch (error) {
              console.error('Marketplace search error:', error);
              productsGrid.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                  <p style="color: #ef4444;">Error loading products. Please try again.</p>
                </div>
              `;
            }
          };

          // Event listeners
          if (searchBtn) {
            searchBtn.addEventListener('click', searchProducts);
          }
          if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
              if (e.key === 'Enter') searchProducts();
            });
          }
          if (prevBtn) {
            prevBtn.addEventListener('click', () => {
              if (currentPage > 1) {
                currentPage--;
                searchProducts();
              }
            });
          }
          if (nextBtn) {
            nextBtn.addEventListener('click', () => {
              currentPage++;
              searchProducts();
            });
          }

          // Initial search
          searchProducts();
        },
      },
      init() {
        this.on('change:attributes', this.updateContent);
      },
      updateContent() {
        const attrs = this.getAttributes();
        this.set('attributes', {
          ...attrs,
          'data-platform-id': this.getTrait('platformId')?.get('value') || 1,
          'data-page-size': this.getTrait('pageSize')?.get('value') || 12,
          'data-search-placeholder': this.getTrait('searchPlaceholder')?.get('value') || 'Search products...',
          'data-show-filters': this.getTrait('showFilters')?.get('value') ? 'true' : 'false',
          'data-show-search': this.getTrait('showSearch')?.get('value') ? 'true' : 'false',
          'data-show-price-filter': this.getTrait('showPriceFilter')?.get('value') ? 'true' : 'false',
          'data-grid-columns': this.getTrait('gridColumns')?.get('value') || '3',
          'data-card-style': this.getTrait('cardStyle')?.get('value') || 'modern',
        });
      },
    },
    view: {
      onRender() {
        const model = this.model;
        const el = this.el;
        const script = model.get('script');
        if (script) {
          try {
            script.call(el);
          } catch (e) {
            console.error('Marketplace script error:', e);
          }
        }
      },
    },
  });

  // ============================================
  // ICON COMPONENT (MUI, FontAwesome, etc.)
  // ============================================
  editor.Components.addType('icon-element', {
    model: {
      defaults: {
        tagName: 'span',
        draggable: true,
        droppable: false,
        attributes: { class: 'icon-element-component' },
        traits: [
          {
            type: 'select',
            name: 'iconLibrary',
            label: 'Icon Library',
            options: [
              { id: 'mui', name: 'Material Icons (Google)' },
              { id: 'fa', name: 'Font Awesome' },
              { id: 'feather', name: 'Feather Icons' },
              { id: 'heroicons', name: 'Heroicons' },
              { id: 'lucide', name: 'Lucide Icons' },
              { id: 'custom', name: 'Custom SVG' },
            ],
            default: 'mui',
          },
          {
            type: 'icon-picker',
            name: 'iconName',
            label: 'Icon Name',
            default: 'home',
          },
          {
            type: 'select',
            name: 'iconStyle',
            label: 'Icon Style',
            options: [
              { id: 'filled', name: 'Filled' },
              { id: 'outlined', name: 'Outlined' },
              { id: 'rounded', name: 'Rounded' },
              { id: 'sharp', name: 'Sharp' },
              { id: 'two-tone', name: 'Two Tone' },
            ],
            default: 'filled',
          },
          {
            type: 'text',
            name: 'iconSize',
            label: 'Size (px)',
            default: '24',
          },
          {
            type: 'color',
            name: 'iconColor',
            label: 'Color',
            default: '#667eea',
          },
          {
            type: 'text',
            name: 'customSvg',
            label: 'Custom SVG Code',
            placeholder: '<svg>...</svg>',
          },
          {
            type: 'checkbox',
            name: 'isButton',
            label: 'Make Clickable',
            default: false,
          },
          {
            type: 'text',
            name: 'linkUrl',
            label: 'Link URL',
            placeholder: 'https://...',
          },
          {
            type: 'text',
            name: 'ariaLabel',
            label: 'Accessibility Label',
            default: 'Icon',
          },
        ],
        script: function() {
          const el = this;
          const iconLibrary = el.getAttribute('data-icon-library') || 'mui';
          const iconName = el.getAttribute('data-icon-name') || 'home';
          const iconStyle = el.getAttribute('data-icon-style') || 'filled';
          const iconSize = el.getAttribute('data-icon-size') || '24';
          const iconColor = el.getAttribute('data-icon-color') || '#667eea';
          const customSvg = el.getAttribute('data-custom-svg') || '';
          const isButton = el.getAttribute('data-is-button') === 'true';
          const linkUrl = el.getAttribute('data-link-url') || '';
          const ariaLabel = el.getAttribute('data-aria-label') || 'Icon';

          // Common MUI icons SVG paths
          const muiIcons = {
            home: 'M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z',
            search: 'M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',
            star: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',
            favorite: 'M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z',
            settings: 'M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z',
            person: 'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z',
            email: 'M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z',
            phone: 'M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z',
            location: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z',
            shopping_cart: 'M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z',
            menu: 'M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z',
            close: 'M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z',
            check: 'M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z',
            add: 'M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z',
            remove: 'M19 13H5v-2h14v2z',
            edit: 'M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z',
            delete: 'M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z',
            visibility: 'M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z',
            arrow_forward: 'M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z',
            arrow_back: 'M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z',
            download: 'M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z',
            upload: 'M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z',
            share: 'M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z',
            notifications: 'M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z',
            info: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z',
            warning: 'M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z',
            error: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z',
            help: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z',
            lock: 'M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z',
            verified: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z',
            thumb_up: 'M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z',
            thumb_down: 'M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z',
            code: 'M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z',
            link: 'M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z',
            calendar: 'M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z',
            bolt: 'M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21z',
            eco: 'M6.05 8.05c-2.73 2.73-2.73 7.15-.02 9.88 1.47-3.4 4.09-6.24 7.36-7.93-2.77 2.34-4.71 5.61-5.39 9.32 2.6 1.23 5.8.78 7.95-1.37C19.43 14.47 20 4 20 4S9.53 4.57 6.05 8.05z',
            rocket: 'M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zM17.65 14.81c-.29 0-.58.11-.81.34-.47.47-.47 1.15-.55 1.81l.26 1.33 4.05 4.05-1.55-3.62c-.31-.13-3.6-1.53-5.89-3.57l1.33.26c.65.13 1.34-.08 1.81-.55.23-.23.34-.52.34-.81 0-.3-.11-.58-.34-.81l-3.45-3.45c-.47-.47-1.15-.68-1.81-.55l-1.33.26-4.05-4.05 1.55 3.62c.31.13 3.6 1.53 5.89 3.57l-1.33-.26c-.65-.13-1.34.08-1.81.55-.23.23-.34.52-.34.81 0 .3.11.58.34.81l3.45 3.45c.47.47 1.15.68 1.81.55l1.33-.26z',
            dashboard: 'M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z',
            analytics: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z',
          };

          // Font Awesome class mapping
          const getFaClass = (name, style) => {
            const styleMap = {
              filled: 'fas',
              outlined: 'far',
              rounded: 'fas',
              sharp: 'fas',
              'two-tone': 'fad',
            };
            return `${styleMap[style] || 'fas'} fa-${name}`;
          };

          let iconHtml = '';
          const sizePx = parseInt(iconSize) || 24;
          const wrapperStyle = `display: inline-flex; align-items: center; justify-content: center; ${isButton ? 'cursor: pointer; transition: transform 0.2s, opacity 0.2s;' : ''}`;

          if (iconLibrary === 'custom' && customSvg) {
            // Custom SVG
            iconHtml = customSvg;
          } else if (iconLibrary === 'mui') {
            // Material Icons - use inline SVG for better compatibility
            const path = muiIcons[iconName] || muiIcons.home;
            iconHtml = `
              <svg xmlns="http://www.w3.org/2000/svg" width="${sizePx}" height="${sizePx}" viewBox="0 0 24 24" fill="${iconColor}" aria-label="${ariaLabel}">
                <path d="${path}"/>
              </svg>
            `;
          } else if (iconLibrary === 'fa') {
            // Font Awesome - requires CDN
            iconHtml = `
              <i class="${getFaClass(iconName, iconStyle)}" style="font-size: ${sizePx}px; color: ${iconColor};" aria-label="${ariaLabel}"></i>
            `;
          } else if (iconLibrary === 'feather' || iconLibrary === 'lucide') {
            // Feather/Lucide - SVG stroke icons
            const featherIcons = {
              home: '<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',
              search: '<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',
              star: '<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',
              heart: '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',
              settings: '<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',
              user: '<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',
              mail: '<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',
              phone: '<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',
              'map-pin': '<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',
              'shopping-cart': '<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',
              menu: '<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',
              x: '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',
              check: '<polyline points="20 6 9 17 4 12"></polyline>',
              plus: '<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',
              minus: '<line x1="5" y1="12" x2="19" y2="12"></line>',
              edit: '<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',
              trash: '<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',
              eye: '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',
              'arrow-right': '<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',
              'arrow-left': '<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',
              download: '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',
              upload: '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',
              share: '<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',
              bell: '<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',
              info: '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',
              'alert-triangle': '<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',
              'alert-circle': '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',
              'help-circle': '<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',
              lock: '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',
              unlock: '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',
              'check-circle': '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',
              'thumbs-up': '<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',
              'thumbs-down': '<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',
              code: '<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',
              link: '<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',
              calendar: '<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',
              zap: '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',
              leaf: '<path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"></path><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"></path>',
            };
            const pathData = featherIcons[iconName] || featherIcons.home;
            iconHtml = `
              <svg xmlns="http://www.w3.org/2000/svg" width="${sizePx}" height="${sizePx}" viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="${ariaLabel}">
                ${pathData}
              </svg>
            `;
          } else if (iconLibrary === 'heroicons') {
            // Heroicons - similar to Feather
            const heroIcons = {
              home: '<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />',
              search: '<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />',
              star: '<path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />',
              heart: '<path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />',
            };
            const pathData = heroIcons[iconName] || heroIcons.home;
            iconHtml = `
              <svg xmlns="http://www.w3.org/2000/svg" width="${sizePx}" height="${sizePx}" viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="1.5" aria-label="${ariaLabel}">
                ${pathData}
              </svg>
            `;
          }

          // Wrap in link if needed
          if (linkUrl) {
            el.innerHTML = `<a href="${linkUrl}" style="${wrapperStyle} text-decoration: none;">${iconHtml}</a>`;
          } else {
            el.innerHTML = `<span style="${wrapperStyle}">${iconHtml}</span>`;
          }

          // Add hover effect for button mode
          if (isButton) {
            const wrapper = el.firstChild;
            wrapper.addEventListener('mouseenter', () => {
              wrapper.style.transform = 'scale(1.1)';
              wrapper.style.opacity = '0.8';
            });
            wrapper.addEventListener('mouseleave', () => {
              wrapper.style.transform = 'scale(1)';
              wrapper.style.opacity = '1';
            });
          }
        },
      },
      init() {
        // Sync attributes when traits change
        this.on('change:attributes', this.syncAttributes);

        // Listen for individual trait changes to trigger re-render
        const traitNames = ['iconLibrary', 'iconName', 'iconStyle', 'iconSize', 'iconColor', 'customSvg', 'isButton', 'linkUrl', 'ariaLabel'];
        traitNames.forEach(traitName => {
          const trait = this.getTrait(traitName);
          if (trait) {
            this.listenTo(trait, 'change:value', () => {
              this.syncAttributes();
              // Force view to re-render
              if (this.view && this.view.onRender) {
                this.view.onRender();
              }
            });
          }
        });
      },
      syncAttributes() {
        const attrs = this.getAttributes();
        const newAttrs = {
          ...attrs,
          'data-icon-library': this.getTrait('iconLibrary')?.get('value') || 'mui',
          'data-icon-name': this.getTrait('iconName')?.get('value') || 'home',
          'data-icon-style': this.getTrait('iconStyle')?.get('value') || 'filled',
          'data-icon-size': this.getTrait('iconSize')?.get('value') || '24',
          'data-icon-color': this.getTrait('iconColor')?.get('value') || '#667eea',
          'data-custom-svg': this.getTrait('customSvg')?.get('value') || '',
          'data-is-button': this.getTrait('isButton')?.get('value') ? 'true' : 'false',
          'data-link-url': this.getTrait('linkUrl')?.get('value') || '',
          'data-aria-label': this.getTrait('ariaLabel')?.get('value') || 'Icon',
        };
        // Use silent to avoid infinite loop
        this.set('attributes', newAttrs, { silent: true });
        // Apply to DOM element directly
        if (this.view && this.view.el) {
          Object.entries(newAttrs).forEach(([key, value]) => {
            this.view.el.setAttribute(key, value);
          });
        }
      },
    },
    view: {
      init() {
        // Listen for attribute changes to re-render the icon
        this.listenTo(this.model, 'change:attributes', this.onRender);
      },
      onRender() {
        const model = this.model;
        const el = this.el;
        const script = model.get('script');
        if (script) {
          try {
            script.call(el);
          } catch (e) {
            console.error('Icon element script error:', e);
          }
        }
      },
    },
  });

  console.log('Custom components registered: audio-player, video-player, countdown-timer, marketplace-embed, icon-element');
}

/**
 * Custom blocks for the block manager
 */
export const customBlocks = [
  // Icon Element Block
  {
    id: 'icon-element',
    label: 'Icon',
    category: 'Basic',
    media: `<svg viewBox="0 0 24 24" width="40" height="40" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>`,
    content: { type: 'icon-element' },
  },
];

export default registerCustomComponents;
